# 2500rBot — рассылка в Telegram

Бот для Telegram (создаётся через @BotFather). Управление рассылками из пользовательского аккаунта: подключение по API ID/API Hash, задачи, пересылка сообщений (forward) без потери премиум-эмодзи.

## Возможности

- **Авторизация:** /connect — API ID, API Hash, телефон, код из Telegram; сохранение сессии; /deactivate — отключить аккаунт.
- **Задачи:** /tasks — список; /newtask — пошаговое создание; /task N start|pause|delete.
- **Настройки задачи:** тип сообщения (текст / HTML / Markdown / переслать / медиа), чаты (ID или @username через запятую, /dialogs N — подставить ID), интервал 20–900 сек, лимиты.
- **Безопасность:** рандом задержки, лимит в сутки, FloodWait, очередь, /errors — логи ошибок.
- **Интерфейс:** только Telegram-бот (команды в чате).

## Установка

1. Создать бота в Telegram: @BotFather → /newbot → получить **токен**.
2. В каталоге проекта:

```bash
python -m venv .venv
.venv\Scripts\pip install -r requirements.txt
```

3. Создать файл `.env`:

```
BOT_TOKEN=123456:ABC-DEF...
```

(токен от @BotFather).

4. Запуск:

```bash
python main.py
# или
.venv\Scripts\python.exe main.py
```

**Windows:** если при активации venv появляется ошибка «выполнение сценариев отключено», можно:
- запускать без активации: `run.bat` или `.venv\Scripts\python.exe main.py`;
- либо один раз в PowerShell: `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`.

## Команды бота

- `/start` — приветствие и список команд
- `/connect` — подключить аккаунт (API ID → API Hash → телефон → код из Telegram)
- `/sessions` — список аккаунтов
- `/deactivate N` — отключить аккаунт с ID N
- `/tasks` — список задач рассылки
- `/newtask` — создать задачу (сессия, название, затем пришли или перешли сообщение боту — текст или пост из канала, чаты, интервал, лимиты)
- `/edittask N` — редактировать задачу N (название, что отправлять, чаты, интервал, лимиты)
- `/task N start` — запустить задачу N
- `/task N pause` — поставить на паузу
- `/task N delete` — удалить задачу
- `/dialogs N` — список чатов аккаунта N (подставить ID или @username в задачу)
- `/logs N` — последние логи отправок задачи N
- `/errors` — последние ошибки (FloodWait и т.д.)
- `/cancel` — отменить текущий ввод (/connect или /newtask)

**Как задать сообщение для рассылки:** в /newtask после названия просто **напиши текст** боту или **перешли пост из канала** — бот сам поймёт: текст будет рассылаться как есть, пересланный пост — как forward (с сохранением премиум-эмодзи).
